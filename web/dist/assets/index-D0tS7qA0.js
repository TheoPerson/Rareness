(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=t(i);fetch(i.href,s)}})();class C{constructor(){this.allSkins=[]}async loadData(){try{const e=await fetch("/data/skins_all.json");if(!e.ok)throw new Error(`Failed to fetch data: ${e.status} ${e.statusText}`);return this.allSkins=await e.json(),console.log(`[DataManager] Loaded ${this.allSkins.length} skins from JSON.`),this.allSkins}catch(e){throw console.error("[DataManager] Error loading data:",e),e}}}class B{constructor(e){this.allSkins=e.map(t=>({...t,_searchStr:`${t.champion} ${t.skin_name}`.toLowerCase()}))}applyFilters(e,t,n,i,s){let a=this.allSkins.filter(l=>!(e&&!l._searchStr.includes(e)||t&&l.champion!==t||n==="chromas"&&!l.isChroma||n==="prestige"&&!l.isPrestige||n==="esports"&&!l.isEsports||n==="favorites"&&!s.has(l.skin_id)));return i!=="default"&&a.sort((l,c)=>{switch(i){case"date-newest":return(c.release_date||"").localeCompare(l.release_date||"");case"date-oldest":return(l.release_date||"").localeCompare(c.release_date||"");case"price-high":return(c.price||0)-(l.price||0);case"price-low":return(l.price||0)-(c.price||0);case"name-az":return l.skin_name.localeCompare(c.skin_name);default:return 0}}),a}}const y={ULTIMATE:"ultimate",LEGENDARY:"legendary",EPIC:"epic",MYTHIC:"mythic",PRESTIGE:"prestige",HEXTECH:"hextech",CHROMA:"chroma",COLLECTION:"collection"};class E{static getBadges(e){const t=[];e.price>=3250?t.push({type:y.ULTIMATE,label:"Ultimate"}):e.price>=1820?t.push({type:y.LEGENDARY,label:"Legendary"}):e.price>=1350?t.push({type:y.EPIC,label:"Epic"}):e.isPrestige&&t.push({type:y.MYTHIC,label:"Mythic"}),e.isPrestige&&t.push({type:y.PRESTIGE,label:"Prestige"}),e.skin_name.includes("Hextech")&&t.push({type:y.HEXTECH,label:"Hextech"}),e.isChroma&&t.push({type:y.CHROMA,label:"Chromas"});const n=["K/DA","PROJECT","Star Guardian","Coven","Spirit Blossom","Blood Moon","High Noon","Pool Party","Bewitching","Snow Moon","Arcana"];for(const i of n)if(e.skin_name.includes(i)){t.push({type:y.COLLECTION,label:i});break}return t}static createBadgeElement(e){const t=document.createElement("span");return t.className=`badge badge-${e.type}`,t.textContent=e.label,t}}class L{constructor(e){this.favorites=e}createCardElement(e,t,n){const i=this.favorites.has(e.skin_id),s=document.createElement("div");s.className="skin-card",s.dataset.skinId=e.skin_id,s.setAttribute("tabindex","0"),s.setAttribute("role","button"),s.setAttribute("aria-label",`View details for ${e.skin_name}`);const a=document.createElement("button");a.className=`skin-card-favorite ${i?"active":""}`,a.dataset.skinId=e.skin_id,a.title=i?"Remove from Favorites":"Add to Favorites",a.setAttribute("aria-label",i?"Remove from Favorites":"Add to Favorites"),a.innerHTML=`
            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" aria-hidden="true" style="pointer-events: none;">
                <path d="M10 3.5L12 8L17 8.5L13.5 12L14.5 17L10 14.5L5.5 17L6.5 12L3 8.5L8 8L10 3.5Z" stroke="currentColor" stroke-width="2" fill="${i?"currentColor":"none"}"/>
            </svg>
        `;const l=document.createElement("div");l.className="skin-card-image-wrapper";const c=document.createElement("img");c.className="skin-card-image",c.src=e.imagePath,c.alt="",c.loading="lazy",l.appendChild(c);const p=E.getBadges(e);if(p.length>0){const r=document.createElement("div");r.className="skin-card-badges",p.forEach(m=>{r.appendChild(E.createBadgeElement(m))}),l.appendChild(r)}const h=document.createElement("div");h.className="skin-card-info";const u=document.createElement("div");u.className="skin-card-title",u.textContent=e.skin_name;const d=document.createElement("div");if(d.className="skin-card-champion",d.textContent=e.champion,h.appendChild(u),h.appendChild(d),e.price){const r=document.createElement("div");r.className="skin-card-price",r.textContent=`${e.price} RP`,h.appendChild(r)}return s.appendChild(a),s.appendChild(l),s.appendChild(h),s}}class w{constructor(e,t){this.favorites=e,this.toggleFavoriteCallback=t,this.modal=document.getElementById("skinModal"),this.adminModal=document.getElementById("adminModal"),this.init()}init(){const e=document.getElementById("closeModal");e&&e.addEventListener("click",()=>this.close()),this.modal&&this.modal.addEventListener("click",i=>{i.target.classList.contains("modal-overlay")&&this.close()});const t=document.getElementById("modalFavorite");t&&t.addEventListener("click",()=>{const i=document.getElementById("modalSkinId").textContent;i&&this.toggleFavoriteCallback&&(this.toggleFavoriteCallback(i),this.favorites.has(i)?t.classList.add("active"):t.classList.remove("active"))});const n=document.getElementById("closeAdmin");n&&n.addEventListener("click",()=>{this.adminModal&&(this.adminModal.style.display="none")}),this.adminModal&&this.adminModal.addEventListener("click",i=>{i.target===this.adminModal&&(this.adminModal.style.display="none")})}open(e){if(!this.modal)return;const t=e;document.getElementById("modalImage").src=t.imagePath,document.getElementById("modalTitle").textContent=t.skin_name,document.getElementById("modalChampion").textContent=t.champion,document.getElementById("modalSkinId").textContent=t.skin_id,document.getElementById("modalSkinNum").textContent=t.skin_num;const n=document.getElementById("modalPriceRow");n&&(t.price>0&&t.price<99999?(n.style.display="flex",document.getElementById("modalPrice").textContent=`${t.price} RP`):n.style.display="none"),this.updateReleaseDate(t);const i=document.getElementById("modalBadges");i.innerHTML="",E.getBadges(t).forEach(c=>{i.appendChild(E.createBadgeElement(c))}),this.updateYouTubeLink(t);const a=document.getElementById("modalFavorite");a&&(this.favorites.has(t.skin_id)?(a.classList.add("active"),a.setAttribute("aria-pressed","true")):(a.classList.remove("active"),a.setAttribute("aria-pressed","false"))),this.modal.classList.add("active"),this.modal.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden";const l=document.getElementById("closeModal");l&&l.focus()}close(){this.modal&&(this.modal.classList.remove("active"),this.modal.setAttribute("aria-hidden","true")),this.adminModal&&(this.adminModal.style.display="none"),document.body.style.overflow=""}updateYouTubeLink(e){const t=document.getElementById("modalYouTubeLink");if(!t)return;t.style.display="inline-flex";let n="";e.skin_name.toLowerCase().includes("default")||e.skin_name.toLowerCase().includes("original")?n=`League of Legends ${e.champion} Base Skin Spotlight`:e.skin_name.toLowerCase().includes(e.champion.toLowerCase())?n=`League of Legends ${e.skin_name} Skin Spotlight`:n=`League of Legends ${e.skin_name} ${e.champion} Skin Spotlight`,t.href=`https://www.youtube.com/results?search_query=${encodeURIComponent(n)}`}async updateReleaseDate(e){const t=document.getElementById("modalReleaseDateRow");if(t){document.getElementById("modalReleaseDate").textContent="Loading date...",t.style.display="flex";try{const n=await fetch(`https://raw.communitydragon.org/latest/plugins/rcp-be-lol-game-data/global/default/v1/skins/${e.skin_id}/${e.skin_id}.json`);if(n.ok){const i=await n.json();if(i.releaseDate){const a=new Date(i.releaseDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});document.getElementById("modalReleaseDate").textContent=a}else document.getElementById("modalReleaseDate").textContent="Unknown"}else throw new Error("API 404")}catch(n){console.log("Could not fetch date",n),document.getElementById("modalReleaseDate").textContent="N/A"}}}}class b{constructor(){this.dataManager=new C,this.filterEngine=null,this.skinCardV=null,this.modal=null,this.allSkins=[],this.filteredSkins=[],this.currentFilter="all",this.currentChampion="",this.searchQuery="",this.currentSort="default",this.isBrowseLoaded=!1,this.favorites=new Set(JSON.parse(localStorage.getItem("skinFavorites")||"[]")),this.skinCardV=new L(this.favorites),this.modal=new w(this.favorites,e=>this.toggleFavorite(e)),this.initialize()}async initialize(){try{this.allSkins=await this.dataManager.loadData(),this.filterEngine=new B(this.allSkins),this.filteredSkins=[...this.allSkins],this.populateChampionFilter(),this.setupEventListeners(),this.setupEventDelegation(),this.updateStats()}catch(e){console.error("Initialization failed",e);const t=document.getElementById("skinsGrid");t&&(t.innerHTML='<div class="error-message">Failed to load skins. Please ensure the data server is running.</div>')}}populateChampionFilter(){const e=[...new Set(this.allSkins.map(n=>n.champion))].sort(),t=document.getElementById("championFilter");t&&e.forEach(n=>{const i=document.createElement("option");i.value=n,i.textContent=n,t.appendChild(i)})}setupEventListeners(){const e=document.getElementById("themeToggle");e&&e.addEventListener("click",()=>{document.body.dataset.theme,document.body.classList.toggle("light-theme");const d=document.body.classList.contains("light-theme");e.querySelector(".sun-icon").style.display=d?"none":"block",e.querySelector(".moon-icon").style.display=d?"block":"none"});const t=document.getElementById("homeBtn");t&&t.addEventListener("click",()=>this.showSection("heroSection"));const n=document.getElementById("browseBtn");n&&n.addEventListener("click",()=>this.loadAndShowBrowse());const i=document.getElementById("heroBrowseBtn");i&&i.addEventListener("click",()=>this.loadAndShowBrowse());const s=document.getElementById("searchInput"),a=document.getElementById("clearSearch");s.addEventListener("input",d=>{this.searchQuery=d.target.value.toLowerCase(),a.style.display=this.searchQuery?"block":"none",this.applyFilters()}),a.addEventListener("click",()=>{s.value="",this.searchQuery="",a.style.display="none",this.applyFilters()}),document.querySelectorAll(".filter-chip").forEach(d=>{d.addEventListener("click",r=>{const m=r.target.closest(".filter-chip");m&&(document.querySelectorAll(".filter-chip").forEach(f=>f.classList.remove("active")),m.classList.add("active"),this.currentFilter=m.dataset.filter,this.applyFilters())})});const l=document.getElementById("favoritesBtn");l&&l.addEventListener("click",()=>{this.showSection("browseSection"),this.isBrowseLoaded||(this.isBrowseLoaded=!0),document.querySelectorAll(".filter-chip").forEach(r=>r.classList.remove("active"));const d=document.querySelector('.filter-chip[data-filter="favorites"]');d&&d.classList.add("active"),this.currentFilter="favorites",this.applyFilters()}),document.getElementById("championFilter").addEventListener("change",d=>{this.currentChampion=d.target.value,this.applyFilters()});const c=document.getElementById("sortControl");c&&c.addEventListener("change",d=>{this.currentSort=d.target.value,this.applyFilters()}),document.addEventListener("keydown",d=>{d.key==="Escape"&&this.modal.close()});const p=document.getElementById("adminTrigger"),h=document.getElementById("adminModal");p&&h&&p.addEventListener("click",()=>{h.style.display="flex",this.updateAdminStats()});const u=document.getElementById("closeAdmin");u&&u.addEventListener("click",()=>{h.style.display="none"})}showSection(e){document.getElementById("heroSection").style.display="none",document.getElementById("browseSection").style.display="none",document.querySelectorAll(".nav-btn").forEach(t=>t.classList.remove("active")),e==="heroSection"?(document.getElementById("heroSection").style.display="block",document.getElementById("homeBtn").classList.add("active")):e==="browseSection"&&(document.getElementById("browseSection").style.display="block",document.getElementById("browseBtn").classList.add("active")),window.scrollTo(0,0)}loadAndShowBrowse(){this.isBrowseLoaded||(this.applyFilters(),this.isBrowseLoaded=!0),this.showSection("browseSection")}toggleFavorite(e){this.favorites.has(e)?this.favorites.delete(e):this.favorites.add(e),localStorage.setItem("skinFavorites",JSON.stringify([...this.favorites])),this.updateStats()}applyFilters(){this.filterEngine&&(this.filteredSkins=this.filterEngine.applyFilters(this.searchQuery,this.currentChampion,this.currentFilter,this.currentSort,this.favorites),this.renderSkins())}renderSkins(){const e=document.getElementById("skinsGrid"),t=document.getElementById("loadingState"),n=document.getElementById("emptyState");if(t&&(t.style.display="none"),this.filteredSkins.length===0){e.innerHTML="",n&&(n.style.display="flex");return}n&&(n.style.display="none"),e.innerHTML="",this.currentRenderCount=0,this.CHUNK_SIZE=50,this.observerSentinel=document.createElement("div"),this.observerSentinel.className="scroll-sentinel",this.observerSentinel.style.height="20px",this.observerSentinel.style.width="100%",this.renderNextChunk(),this.scrollObserver&&this.scrollObserver.disconnect(),this.scrollObserver=new IntersectionObserver(i=>{i[0].isIntersecting&&this.renderNextChunk()},{rootMargin:"200px"}),e.appendChild(this.observerSentinel),this.scrollObserver.observe(this.observerSentinel)}renderNextChunk(){const e=document.getElementById("skinsGrid");if(this.currentRenderCount>=this.filteredSkins.length){this.scrollObserver&&this.scrollObserver.disconnect(),this.observerSentinel&&(this.observerSentinel.style.display="none");return}const t=this.filteredSkins.slice(this.currentRenderCount,this.currentRenderCount+this.CHUNK_SIZE),n=document.createDocumentFragment();t.forEach(i=>{const s=this.skinCardV.createCardElement(i);n.appendChild(s)}),this.observerSentinel&&this.observerSentinel.parentNode===e?e.insertBefore(n,this.observerSentinel):e.appendChild(n),this.currentRenderCount+=t.length}setupEventDelegation(){const e=document.getElementById("skinsGrid");e&&(e.addEventListener("click",t=>{const n=t.target.closest(".skin-card-favorite");if(n){t.stopPropagation();const s=n.dataset.skinId;if(s){this.toggleFavorite(s),n.classList.toggle("active");const a=n.querySelector("svg path");a&&(n.classList.contains("active")?(a.setAttribute("fill","currentColor"),n.setAttribute("aria-label","Remove from Favorites"),n.title="Remove from Favorites"):(a.setAttribute("fill","none"),n.setAttribute("aria-label","Add to Favorites"),n.title="Add to Favorites"))}return}const i=t.target.closest(".skin-card");if(i){const s=i.dataset.skinId;if(s){const a=this.getSkinById(s);a&&this.modal&&this.modal.open(a)}}}),e.addEventListener("keydown",t=>{if(t.key==="Enter"||t.key===" "){const n=t.target.closest(".skin-card-favorite");if(n){t.preventDefault(),t.stopPropagation(),n.click();return}const i=t.target.closest(".skin-card");if(i&&document.activeElement===i){t.preventDefault();const s=i.dataset.skinId;if(s){const a=this.getSkinById(s);a&&this.modal&&this.modal.open(a)}}}}))}getSkinById(e){return this.allSkins.find(t=>t.skin_id==e)}updateStats(){try{const e=this.allSkins.length,t=new Set(this.allSkins.map(r=>r.champion)).size,n=this.favorites.size,i=this.allSkins.filter(r=>r.isChroma).length,s=e-i,a=document.getElementById("favoritesCount");a&&(a.textContent=n);const l=document.getElementById("heroTotalSkins"),c=document.getElementById("heroTotalChamps");l&&(l.textContent=s.toLocaleString()),c&&(c.textContent=t.toLocaleString());const p=document.getElementById("footerStats");p&&(p.textContent=`${s.toLocaleString()} Skins • ${t} Champions • ${i} Chromas`);const h=this.allSkins.filter(r=>r.price>0&&r.price<99999),u=(r,m,f)=>{const g=document.getElementById(r);if(g&&m){const v=g.querySelector(".stat-icon");v&&m.imagePath&&(v.style.backgroundImage=`url('${m.imagePath}')`);const S=g.querySelector(".stat-value");S&&(S.textContent=f||m.skin_name)}else if(g){const v=g.querySelector(".stat-value");v&&(v.textContent="N/A")}};if(h.length>0){const r=h.reduce((f,g)=>(f.price||0)>(g.price||0)?f:g);u("statMostExpensive",r,`${r.price} RP`);const m=h.reduce((f,g)=>(f.price||99999)<(g.price||99999)?f:g);u("statCheapest",m,`${m.price} RP`)}else u("statMostExpensive",null,"N/A"),u("statCheapest",null,"N/A");const d=this.allSkins.filter(r=>r.release_date);if(d.length>0){const r=d.reduce((m,f)=>(m.release_date||"")>(f.release_date||"")?m:f);u("statLatest",r,r.release_date)}else u("statLatest",null,"N/A")}catch(e){console.warn("Stats update warning:",e)}}updateAdminStats(){if(performance&&performance.memory){const t=Math.round(performance.memory.usedJSHeapSize/1024/1024),n=Math.round(performance.memory.jsHeapSizeLimit/1024/1024);document.getElementById("admin_memory").textContent=`${t} / ${n} MB`}else document.getElementById("admin_memory").textContent="Restricted";document.getElementById("admin_dom").textContent=document.getElementsByTagName("*").length,document.getElementById("admin_assets").textContent=document.images.length;const e=Math.round(performance.now());document.getElementById("admin_tti").textContent=`${e}ms`}}var I="@vercel/speed-insights",x="1.3.1",M=()=>{window.si||(window.si=function(...e){(window.siq=window.siq||[]).push(e)})};function _(){return typeof window<"u"}function A(){try{const o="production"}catch{}return"production"}function k(){return A()==="development"}function F(o){return o.scriptSrc?o.scriptSrc:k()?"https://va.vercel-scripts.com/v1/speed-insights/script.debug.js":o.dsn?"https://va.vercel-scripts.com/v1/speed-insights/script.js":o.basePath?`${o.basePath}/speed-insights/script.js`:"/_vercel/speed-insights/script.js"}function R(o={}){var e;if(!_()||o.route===null)return null;M();const t=F(o);if(document.head.querySelector(`script[src*="${t}"]`))return null;o.beforeSend&&((e=window.si)==null||e.call(window,"beforeSend",o.beforeSend));const n=document.createElement("script");return n.src=t,n.defer=!0,n.dataset.sdkn=I+(o.framework?`/${o.framework}`:""),n.dataset.sdkv=x,o.sampleRate&&(n.dataset.sampleRate=o.sampleRate.toString()),o.route&&(n.dataset.route=o.route),o.endpoint?n.dataset.endpoint=o.endpoint:o.basePath&&(n.dataset.endpoint=`${o.basePath}/speed-insights/vitals`),o.dsn&&(n.dataset.dsn=o.dsn),k()&&o.debug===!1&&(n.dataset.debug="false"),n.onerror=()=>{console.log(`[Vercel Speed Insights] Failed to load script from ${t}. Please check if any content blockers are enabled and try again.`)},document.head.appendChild(n),{setRoute:i=>{n.dataset.route=i??void 0}}}R();document.addEventListener("DOMContentLoaded",()=>{new b});
