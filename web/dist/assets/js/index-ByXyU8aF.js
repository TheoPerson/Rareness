import{i as e}from"./vercel-insights-BP3KXQRc.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class t{constructor(){this.allSkins=[]}async loadData(){const e=new AbortController,t=setTimeout(()=>e.abort(),15e3);try{const n=await fetch("/data/skins_all.json",{signal:e.signal});if(clearTimeout(t),!n.ok)throw new Error(`Failed to fetch data: ${n.status} ${n.statusText}`);return this.allSkins=await n.json(),this.allSkins}catch(n){if(clearTimeout(t),"AbortError"===n.name)throw new Error("Data loading timed out. Please refresh the page.");throw n}}}class n{constructor(e){this.allSkins=e.map(e=>({...e,_searchStr:`${e.champion} ${e.skin_name}`.toLowerCase()}))}applyFilters(e,t,n,s,i){let o=this.allSkins.filter(s=>!(e&&!s._searchStr.includes(e))&&((!t||s.champion===t)&&(!("chromas"===n&&!s.isChroma)&&(!("prestige"===n&&!s.isPrestige)&&(!("esports"===n&&!s.isEsports)&&!("favorites"===n&&!i.has(s.skin_id)))))));return"default"!==s&&o.sort((e,t)=>{switch(s){case"date-newest":return(t.release_date||"").localeCompare(e.release_date||"");case"date-oldest":return(e.release_date||"").localeCompare(t.release_date||"");case"price-high":return(t.price||0)-(e.price||0);case"price-low":return(e.price||0)-(t.price||0);case"name-az":return e.skin_name.localeCompare(t.skin_name);default:return 0}}),o}}const s="ultimate",i="legendary",o="epic",a="mythic",r="prestige",l="hextech",d="chroma",c="collection";class m{static getBadges(e){const t=[];e.price>=3250?t.push({type:s,label:"Ultimate"}):e.price>=1820?t.push({type:i,label:"Legendary"}):e.price>=1350?t.push({type:o,label:"Epic"}):e.isPrestige&&t.push({type:a,label:"Mythic"}),e.isPrestige&&t.push({type:r,label:"Prestige"}),e.skin_name.includes("Hextech")&&t.push({type:l,label:"Hextech"}),e.isChroma&&t.push({type:d,label:"Chromas"});const n=["K/DA","PROJECT","Star Guardian","Coven","Spirit Blossom","Blood Moon","High Noon","Pool Party","Bewitching","Snow Moon","Arcana"];for(const s of n)if(e.skin_name.includes(s)){t.push({type:c,label:s});break}return t}static createBadgeElement(e){const t=document.createElement("span");return t.className=`badge badge-${e.type}`,t.textContent=e.label,t}}class h{constructor(e){this.favorites=e}createCardElement(e){const t=this.favorites.has(e.skin_id),n=document.createElement("div");n.className="skin-card",n.dataset.skinId=e.skin_id,n.setAttribute("tabindex","0"),n.setAttribute("role","button"),n.setAttribute("aria-label",`View details for ${e.skin_name}`);const s=document.createElement("button");s.className="skin-card-favorite "+(t?"active":""),s.dataset.skinId=e.skin_id,s.title=t?"Remove from Favorites":"Add to Favorites",s.setAttribute("aria-label",t?"Remove from Favorites":"Add to Favorites"),s.innerHTML=`\n            <svg width="20" height="20" viewBox="0 0 20 20" fill="none" aria-hidden="true" style="pointer-events: none;">\n                <path d="M10 3.5L12 8L17 8.5L13.5 12L14.5 17L10 14.5L5.5 17L6.5 12L3 8.5L8 8L10 3.5Z" stroke="currentColor" stroke-width="2" fill="${t?"currentColor":"none"}"/>\n            </svg>\n        `;const i=document.createElement("div");i.className="skin-card-image-wrapper";const o=document.createElement("img");o.className="skin-card-image",o.src=e.imagePath,o.alt="",o.loading="lazy",o.onerror=()=>{o.onerror=null,o.src=`https://ddragon.leagueoflegends.com/cdn/img/champion/splash/${e.champion}_${e.skin_num}.jpg`},i.appendChild(o);const a=m.getBadges(e);if(a.length>0){const e=document.createElement("div");e.className="skin-card-badges",a.forEach(t=>{e.appendChild(m.createBadgeElement(t))}),i.appendChild(e)}const r=document.createElement("div");r.className="skin-card-info";const l=document.createElement("div");l.className="skin-card-title",l.textContent=e.skin_name;const d=document.createElement("div");if(d.className="skin-card-champion",d.textContent=e.champion,r.appendChild(l),r.appendChild(d),e.price){const t=document.createElement("div");t.className="skin-card-price",t.textContent=`${e.price} RP`,r.appendChild(t)}return n.appendChild(s),n.appendChild(i),n.appendChild(r),n}}class u{constructor(e,t){this.favorites=e,this.toggleFavoriteCallback=t,this.modal=document.getElementById("skinModal"),this.adminModal=document.getElementById("adminModal"),this.init()}init(){const e=document.getElementById("closeModal");e&&e.addEventListener("click",()=>this.close()),this.modal&&this.modal.addEventListener("click",e=>{e.target.classList.contains("modal-overlay")&&this.close()});const t=document.getElementById("modalFavorite");t&&t.addEventListener("click",()=>{const e=document.getElementById("modalSkinId").textContent;e&&this.toggleFavoriteCallback&&(this.toggleFavoriteCallback(e),this.favorites.has(e)?t.classList.add("active"):t.classList.remove("active"))});const n=document.getElementById("closeAdmin");n&&n.addEventListener("click",()=>{this.adminModal&&(this.adminModal.style.display="none")}),this.adminModal&&this.adminModal.addEventListener("click",e=>{e.target===this.adminModal&&(this.adminModal.style.display="none")})}open(e){if(!this.modal)return;const t=e;document.getElementById("modalImage").src=t.imagePath,document.getElementById("modalTitle").textContent=t.skin_name,document.getElementById("modalChampion").textContent=t.champion,document.getElementById("modalSkinId").textContent=t.skin_id,document.getElementById("modalSkinNum").textContent=t.skin_num;const n=document.getElementById("modalPriceRow");n&&(t.price>0&&t.price<99999?(n.style.display="flex",document.getElementById("modalPrice").textContent=`${t.price} RP`):n.style.display="none"),this.updateReleaseDate(t);const s=document.getElementById("modalBadges");s.innerHTML="";m.getBadges(t).forEach(e=>{s.appendChild(m.createBadgeElement(e))}),this.updateYouTubeLink(t);const i=document.getElementById("modalFavorite");i&&(this.favorites.has(t.skin_id)?(i.classList.add("active"),i.setAttribute("aria-pressed","true")):(i.classList.remove("active"),i.setAttribute("aria-pressed","false"))),this.modal.classList.add("active"),this.modal.setAttribute("aria-hidden","false"),document.body.style.overflow="hidden";const o=document.getElementById("closeModal");o&&o.focus()}close(){this.modal&&(this.modal.classList.remove("active"),this.modal.setAttribute("aria-hidden","true")),this.adminModal&&(this.adminModal.style.display="none"),document.body.style.overflow=""}updateYouTubeLink(e){const t=document.getElementById("modalYouTubeLink");if(!t)return;t.style.display="inline-flex";let n="";n=e.skin_name.toLowerCase().includes("default")||e.skin_name.toLowerCase().includes("original")?`League of Legends ${e.champion} Base Skin Spotlight`:e.skin_name.toLowerCase().includes(e.champion.toLowerCase())?`League of Legends ${e.skin_name} Skin Spotlight`:`League of Legends ${e.skin_name} ${e.champion} Skin Spotlight`,t.href=`https://www.youtube.com/results?search_query=${encodeURIComponent(n)}`}async updateReleaseDate(e){const t=document.getElementById("modalReleaseDateRow");if(t){if(e.release_date&&"2000-01-01"!==e.release_date){const n=new Date(e.release_date).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});return document.getElementById("modalReleaseDate").textContent=n,void(t.style.display="flex")}document.getElementById("modalReleaseDate").textContent="Loading date...",t.style.display="flex";try{const t=await fetch(`https://raw.communitydragon.org/latest/plugins/rcp-be-lol-game-data/global/default/v1/skins/${e.skin_id}/${e.skin_id}.json`);if(!t.ok)throw new Error("API 404");{const e=await t.json();if(e.releaseDate){const t=new Date(e.releaseDate).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"});document.getElementById("modalReleaseDate").textContent=t}else document.getElementById("modalReleaseDate").textContent="Unknown"}}catch(n){document.getElementById("modalReleaseDate").textContent="N/A"}}}}class p{constructor(){this.dataManager=new t,this.filterEngine=null,this.skinCardV=null,this.modal=null,this.allSkins=[],this.filteredSkins=[],this.currentFilter="all",this.currentChampion="",this.searchQuery="",this.currentSort="default",this.isBrowseLoaded=!1,this.favorites=new Set(JSON.parse(localStorage.getItem("skinFavorites")||"[]")),this.skinCardV=new h(this.favorites),this.modal=new u(this.favorites,e=>this.toggleFavorite(e)),this.debouncedApplyFilters=this.debounce(()=>this.applyFilters(),150),this.initialize()}debounce(e,t){let n;return function(...s){clearTimeout(n),n=setTimeout(()=>{clearTimeout(n),e.apply(this,s)},t)}}async initialize(){try{this.allSkins=await this.dataManager.loadData(),this.filterEngine=new n(this.allSkins),this.filteredSkins=[...this.allSkins],this.populateChampionFilter(),this.setupEventListeners(),this.setupEventDelegation(),this.updateStats()}catch(e){const t=document.getElementById("skinsGrid");t&&(t.innerHTML='<div class="error-message">Failed to load skins. Please ensure the data server is running.</div>')}}populateChampionFilter(){const e=[...new Set(this.allSkins.map(e=>e.champion))].sort(),t=document.getElementById("championFilter");t&&e.forEach(e=>{const n=document.createElement("option");n.value=e,n.textContent=e,t.appendChild(n)})}setupEventListeners(){const e=document.getElementById("themeToggle");e&&e.addEventListener("click",()=>{document.body.classList.toggle("light-theme");const t=document.body.classList.contains("light-theme");e.querySelector(".sun-icon").style.display=t?"none":"block",e.querySelector(".moon-icon").style.display=t?"block":"none"});const t=document.getElementById("homeBtn");t&&t.addEventListener("click",()=>this.showSection("heroSection"));const n=document.getElementById("browseBtn");n&&n.addEventListener("click",()=>this.loadAndShowBrowse());const s=document.getElementById("heroBrowseBtn");s&&s.addEventListener("click",()=>this.loadAndShowBrowse());const i=document.getElementById("searchInput"),o=document.getElementById("clearSearch");i.addEventListener("input",e=>{this.searchQuery=e.target.value.toLowerCase(),o.style.display=this.searchQuery?"block":"none",this.debouncedApplyFilters()}),o.addEventListener("click",()=>{i.value="",this.searchQuery="",o.style.display="none",this.applyFilters()}),document.querySelectorAll(".filter-chip").forEach(e=>{e.addEventListener("click",e=>{const t=e.target.closest(".filter-chip");t&&(document.querySelectorAll(".filter-chip").forEach(e=>e.classList.remove("active")),t.classList.add("active"),this.currentFilter=t.dataset.filter,this.applyFilters())})});const a=document.getElementById("favoritesBtn");a&&a.addEventListener("click",()=>{this.showSection("browseSection"),this.isBrowseLoaded||(this.isBrowseLoaded=!0),document.querySelectorAll(".filter-chip").forEach(e=>e.classList.remove("active"));const e=document.querySelector('.filter-chip[data-filter="favorites"]');e&&e.classList.add("active"),this.currentFilter="favorites",this.applyFilters()}),document.getElementById("championFilter").addEventListener("change",e=>{this.currentChampion=e.target.value,this.applyFilters()});const r=document.getElementById("sortControl");r&&r.addEventListener("change",e=>{this.currentSort=e.target.value,this.applyFilters()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&this.modal.close()});const l=document.getElementById("adminTrigger"),d=document.getElementById("adminModal");l&&d&&l.addEventListener("click",()=>{d.style.display="flex",this.updateAdminStats()});const c=document.getElementById("closeAdmin");c&&c.addEventListener("click",()=>{d.style.display="none"})}showSection(e){document.getElementById("heroSection").style.display="none",document.getElementById("browseSection").style.display="none",document.querySelectorAll(".nav-btn").forEach(e=>e.classList.remove("active")),"heroSection"===e?(document.getElementById("heroSection").style.display="block",document.getElementById("homeBtn").classList.add("active")):"browseSection"===e&&(document.getElementById("browseSection").style.display="block",document.getElementById("browseBtn").classList.add("active")),window.scrollTo(0,0)}loadAndShowBrowse(){this.isBrowseLoaded||(this.applyFilters(),this.isBrowseLoaded=!0),this.showSection("browseSection")}toggleFavorite(e){this.favorites.has(e)?this.favorites.delete(e):this.favorites.add(e),localStorage.setItem("skinFavorites",JSON.stringify([...this.favorites])),this.updateStats()}applyFilters(){this.filterEngine&&(this.filteredSkins=this.filterEngine.applyFilters(this.searchQuery,this.currentChampion,this.currentFilter,this.currentSort,this.favorites),this.renderSkins())}renderSkins(){const e=document.getElementById("skinsGrid"),t=document.getElementById("loadingState"),n=document.getElementById("emptyState");if(t&&(t.style.display="none"),0===this.filteredSkins.length)return e.innerHTML="",void(n&&(n.style.display="flex"));n&&(n.style.display="none"),e.innerHTML="",this.currentRenderCount=0,this.CHUNK_SIZE=50,this.observerSentinel=document.createElement("div"),this.observerSentinel.className="scroll-sentinel",this.observerSentinel.style.height="20px",this.observerSentinel.style.width="100%",this.renderNextChunk(),this.scrollObserver&&this.scrollObserver.disconnect(),this.scrollObserver=new IntersectionObserver(e=>{e[0].isIntersecting&&this.renderNextChunk()},{rootMargin:"200px"}),e.appendChild(this.observerSentinel),this.scrollObserver.observe(this.observerSentinel)}renderNextChunk(){const e=document.getElementById("skinsGrid");if(this.currentRenderCount>=this.filteredSkins.length)return this.scrollObserver&&this.scrollObserver.disconnect(),void(this.observerSentinel&&(this.observerSentinel.style.display="none"));const t=this.filteredSkins.slice(this.currentRenderCount,this.currentRenderCount+this.CHUNK_SIZE),n=document.createDocumentFragment();t.forEach(e=>{const t=this.skinCardV.createCardElement(e);n.appendChild(t)}),this.observerSentinel&&this.observerSentinel.parentNode===e?e.insertBefore(n,this.observerSentinel):e.appendChild(n),this.currentRenderCount+=t.length}setupEventDelegation(){const e=document.getElementById("skinsGrid");e&&(e.addEventListener("click",e=>{const t=e.target.closest(".skin-card-favorite");if(t){e.stopPropagation();const n=t.dataset.skinId;if(n){this.toggleFavorite(n),t.classList.toggle("active");const e=t.querySelector("svg path");e&&(t.classList.contains("active")?(e.setAttribute("fill","currentColor"),t.setAttribute("aria-label","Remove from Favorites"),t.title="Remove from Favorites"):(e.setAttribute("fill","none"),t.setAttribute("aria-label","Add to Favorites"),t.title="Add to Favorites"))}return}const n=e.target.closest(".skin-card");if(n){const e=n.dataset.skinId;if(e){const t=this.getSkinById(e);t&&this.modal&&this.modal.open(t)}}}),e.addEventListener("keydown",e=>{if("Enter"===e.key||" "===e.key){const t=e.target.closest(".skin-card-favorite");if(t)return e.preventDefault(),e.stopPropagation(),void t.click();const n=e.target.closest(".skin-card");if(n&&document.activeElement===n){e.preventDefault();const t=n.dataset.skinId;if(t){const e=this.getSkinById(t);e&&this.modal&&this.modal.open(e)}}}}))}getSkinById(e){return this.allSkins.find(t=>t.skin_id==e)}updateStats(){try{const e=this.allSkins.length,t=new Set(this.allSkins.map(e=>e.champion)).size,n=this.favorites.size,s=this.allSkins.filter(e=>e.isChroma).length,i=e-s,o=document.getElementById("favoritesCount");o&&(o.textContent=n);const a=document.getElementById("heroTotalSkins"),r=document.getElementById("heroTotalChamps");a&&(a.textContent=i.toLocaleString()),r&&(r.textContent=t.toLocaleString());const l=document.getElementById("footerStats");l&&(l.textContent=`${i.toLocaleString()} Skins • ${t} Champions • ${s} Chromas`);const d=this.allSkins.filter(e=>e.price>0&&e.price<99999),c=(e,t,n)=>{const s=document.getElementById(e);if(s&&t){const e=s.querySelector(".stat-icon");e&&t.imagePath&&(e.style.backgroundImage=`url('${t.imagePath}')`);const i=s.querySelector(".stat-value");i&&(i.textContent=n||t.skin_name)}else if(s){const e=s.querySelector(".stat-value");e&&(e.textContent="N/A")}};if(d.length>0){const e=d.reduce((e,t)=>(e.price||0)>(t.price||0)?e:t);c("statMostExpensive",e,`${e.price} RP`);const t=d.reduce((e,t)=>(e.price||99999)<(t.price||99999)?e:t);c("statCheapest",t,`${t.price} RP`)}else c("statMostExpensive",null,"N/A"),c("statCheapest",null,"N/A");const m=this.allSkins.filter(e=>e.release_date);if(m.length>0){const e=m.reduce((e,t)=>(e.release_date||"")>(t.release_date||"")?e:t);c("statLatest",e,e.release_date)}else c("statLatest",null,"N/A")}catch(e){}}updateAdminStats(){if(performance&&performance.memory){const e=Math.round(performance.memory.usedJSHeapSize/1024/1024),t=Math.round(performance.memory.jsHeapSizeLimit/1024/1024);document.getElementById("admin_memory").textContent=`${e} / ${t} MB`}else document.getElementById("admin_memory").textContent="Restricted";document.getElementById("admin_dom").textContent=document.getElementsByTagName("*").length,document.getElementById("admin_assets").textContent=document.images.length;const e=Math.round(performance.now());document.getElementById("admin_tti").textContent=`${e}ms`}}e(),document.addEventListener("DOMContentLoaded",()=>{new p});
